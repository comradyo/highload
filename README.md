# HIGHLOAD
Домашнее задание по высоконагруженным системам
Сервис - ***Tumblr***
###MVP
1. Регистрация
2. Создание постов
3. Просмотр ленты

###Целевая аудитория
> *примечание: "блог" - равносильно странице пользователя*

Среднее число посещений в месяц ≈ 320 миллионов
Среднее число посещений в день ≈ 10.6 миллионов
Средние число новых блогов в месяц ≈ 8 миллионов
Аудитория по странам:
- США - 47.65 %
- Великобритания - 5.84 %
- Канада - 5.29 %
- Австралия - 3 %
- Остальные страны - 38.22 %

###Рассчет нагрузки

##### Продуктовые метрики

Среднее число посещений в месяц ≈ 320 миллионов
Среднее число посещений в день ≈ 10.6 миллионов

Число постов = 171.5 миллиардов
Среднее число новых постов в месяц ≈ 3 миллиарда
Среднее число новых постов в день ≈ 100 миллионов

Число блогов (страниц пользователей) = 496 миллионов
Среднее число новых блогов в месяц ≈ 8 миллионов
Среднее число новых блогов в день ≈ 267 тысяч

Средний размер хранилища пользователя:

| Характеристика | Средний размер | Количество |
| ------------ | ------------ | ------------ |
| Аватар пользователя |  5 Кб | 1 |
|Количество постов||345|
| GIF-изображение  |  1 Мб | 8%|
| Видео  |  5 Мб | 2% |
| Изображение | 1 Мб| 90% | |

**Размер** = (1× 0.8 + 5 × 0.2 + 1 × 0.9) × 345 = **931.5 Мб**

Средняя продолжительсность посещения сайта - 9 минут
Если считать, что за 10 секунд просматривается один пост, то за 9 минут в среднем прогружается 54 поста для одного пользователя.
Тогда в среднем в день просматривается ≈ 572 миллиона постов.

Среднее количество действий по типам в день:

| Действие| Количество действий |
| ------------ | ------------ | 
|Регистрация|267 000|
|Создание поста|100 000 000|
| Просмотр поста| 572 000 000||

##### Технические метрики

Размер хранения в разбивке по типам данных

| Сущность| Размер ед. | Количество | Общий объем (в Пб)|
| ------------ | ------------ | ------------ | ------------ |
| GIF-изображение  |  0.8 Мб | 13 720 000 000|10.2 Пб|
| Видео  |  5 Мб | 3 430 000 000 |15.9 Пб|
| Изображение | 1 Мб| 153 350 000 000 |142,8 Пб ||

Сетевой трафик

> Средний размер включает в себя как изображение, так и отдачу верстки и текста

| Действие| Ср. размер | Количество в день | трафик|
| ------------ | ------------ | ------------ | ------------ |
| Создание поста| 3 Мб| 100 000 000 |27.125 ГБ/с |
| Просмотр поста| 3 Мб| 100 000 000 |155 ГБ/с |

RPS

| Действие| RPS|
| ------------ | ------------ |
|Регистрация|3|
|Создание поста|1 157|
| Просмотр поста| 6 620||